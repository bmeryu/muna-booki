<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO & Social Meta Tags -->
    <title>Muna Booki - Tu Aliado en la Crianza con Cuentos Personalizados</title>
    <meta name="description" content="Enfrenta los desafíos de la crianza y fomenta valores en tus hijos con video-cuentos personalizados y una biblioteca de historias seguras. Muna Booki, tu aliado para criar con magia.">
    <meta property="og:title" content="Muna Booki - Tu Aliado en la Crianza con Cuentos Personalizados">
    <meta property="og:description" content="Transforma desafíos como los celos o miedos en lecciones de vida a través de historias mágicas donde tu hijo es el héroe, o explora nuestra biblioteca segura.">
    <meta property="og:image" content="https://munabooki.com/og-image.jpg">
    <meta property="og:url" content="https://munabooki.com">
    <meta property="og:type" content="website">

    <link rel="icon" href="fav.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&family=Pacifico&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-dark-blue: #0A2F5B;
            --color-teal: #00B2A9;
            --color-gold: #FFC845;
            --color-light-bg: #F8F9FA;
        }
        body {
            font-family: 'Poppins', sans-serif;
            color: #333;
        }
        .font-cursive { font-family: 'Pacifico', cursive; }
        .btn { transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .btn-primary { background-color: var(--color-teal); color: white; }
        .btn-primary:hover { background-color: #009a92; }
        .btn-secondary { background-color: var(--color-gold); color: var(--color-dark-blue); }
        .btn-secondary:hover { background-color: #e6b43e; }
        .section-title { color: var(--color-dark-blue); }
        .focus-ring:focus { outline: 2px solid var(--color-gold); outline-offset: 2px; }
        .plan-card { border: 1px solid #e0e0e0; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .plan-card:hover { transform: translateY(-8px); box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .plan-featured { border: 2px solid var(--color-teal); transform: scale(1.05); }
        .star-gold { color: var(--color-gold); }
        .whatsapp-float { position: fixed; width: 60px; height: 60px; bottom: 40px; right: 40px; background-color: #25d366; color: #FFF; border-radius: 50px; text-align: center; font-size: 30px; box-shadow: 2px 2px 6px rgba(0,0,0,0.25); z-index: 100; display: flex; align-items: center; justify-content: center; transition: transform 0.3s ease; }
        .whatsapp-float:hover { transform: scale(1.1); }
        .video-thumbnail { position: relative; cursor: pointer; overflow: hidden; border-radius: 1rem; }
        .video-thumbnail::before { content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.3); transition: background 0.3s ease; }
        .video-thumbnail:hover::before { background: rgba(0,0,0,0.1); }
        .play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(1); transition: transform 0.3s ease; width: 80px; height: 80px; background: rgba(255,255,255,0.8); border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .video-thumbnail:hover .play-icon { transform: translate(-50%, -50%) scale(1.1); }

        /* Tooltip libro impreso */
        .tooltip-trigger { position: relative; cursor: pointer; border-bottom: 1px dotted var(--color-teal); }
        .tooltip-content { visibility: hidden; opacity: 0; transition: opacity 0.3s ease, transform 0.3s ease; transform: translateY(10px); }
        .tooltip-trigger:hover .tooltip-content { visibility: visible; opacity: 1; transform: translateY(0); }

        /* --- AUTH MODAL --- */
        .modal-backdrop { background: rgba(0,0,0,0.5); }
        .modal-hidden { display: none; }
    </style>
</head>
<body class="bg-white">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <a href="index.html">
                    <img src="https://bmeryu.github.io/muna-booki/Logo_MunaBooki.png" alt="Logo de Muna Booki" class="h-16 mr-4">
                </a>
            </div>
            <div class="hidden md:flex items-center space-x-8">
                <a href="biblioteca_mejorada.html" class="text-gray-600 hover:text-teal-500 font-semibold focus-ring rounded">Biblioteca</a>
                <a href="#personalized" class="text-gray-600 hover:text-teal-500 font-semibold focus-ring rounded">Cuentos Personalizados</a>
                <a href="#plans" class="text-gray-600 hover:text-teal-500 font-semibold focus-ring rounded">Planes</a>
                <a href="#" id="header-faq-trigger" class="text-gray-600 hover:text-teal-500 font-semibold focus-ring rounded">FAQ</a>
            </div>

            <!-- Auth Buttons Area (llenado por JS) -->
            <div id="auth-container" class="flex items-center space-x-2">
                <!-- Poblado por JS según estado -->
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="py-20 md:py-32 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-5xl md:text-7xl font-bold" style="color: var(--color-dark-blue);">
                    La <span class="font-cursive" style="color: var(--color-teal);">magia</span> de un cuento,<br>la <span class="font-cursive" style="color: var(--color-gold);">emoción</span> de un video.
                </h1>
                <p class="mt-8 text-lg md:text-xl text-gray-700 max-w-2xl mx-auto leading-relaxed">
                    Transforma los desafíos de la crianza en historias inolvidables. Un regalo único, entregado en video, que educa y empodera.
                </p>
                <div class="mt-12">
                    <a href="#plans" class="btn btn-primary text-xl font-bold py-4 px-10 rounded-full focus-ring">
                        Descubre los Planes
                    </a>
                </div>
            </div>
        </section>

        <!-- Parenting Ally Section -->
        <section id="ally" class="py-20 md:py-24 bg-gray-50">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-4xl md:text-5xl font-bold section-title mb-6 leading-tight">Tu aliado para una crianza <br> más consciente y divertida</h2>
                <p class="text-lg md:text-xl text-gray-700 max-w-3xl mx-auto mb-10">Sabemos que criar es un reto maravilloso. Por eso, creamos herramientas que te ayudan a conectar con tus hijos y a sembrar valores a través del poder de las historias. Descubre nuestras dos soluciones mágicas.</p>
                <div class="flex justify-center gap-4 flex-wrap">
                    <a href="biblioteca_mejorada.html" class="btn btn-secondary text-lg font-bold py-3 px-8 rounded-full focus-ring">Conoce la Biblioteca</a>
                    <a href="#personalized" class="btn btn-primary text-lg font-bold py-3 px-8 rounded-full focus-ring">Crea un Cuento Personalizado</a>
                </div>
            </div>
        </section>

        <!-- Library Section -->
        <section id="library" class="py-20">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div>
                        <span class="font-bold text-teal-500 uppercase">BIBLIOTECA MÁGICA</span>
                        <h2 class="text-3xl md:text-4xl font-bold section-title my-4">Contenido seguro y enriquecedor, siempre a tu alcance.</h2>
                        <p class="text-lg text-gray-600 mb-6">Nuestra biblioteca es un refugio de historias cuidadosamente seleccionadas por pedagogos. Ofrece a tus hijos una alternativa positiva al contenido masivo, con cuentos que entretienen, educan en valores y desarrollan la inteligencia emocional.</p>
                        <ul class="space-y-4">
                            <li class="flex items-start"><span class="text-teal-500 font-bold mr-3 mt-1">✓</span><div><strong class="text-gray-800">Acceso Ilimitado:</strong> Disfruta de todos nuestros video-cuentos sin restricciones.</div></li>
                            <li class="flex items-start"><span class="text-teal-500 font-bold mr-3 mt-1">✓</span><div><strong class="text-gray-800">Nuevas Historias Cada Mes:</strong> Contenido fresco para mantener viva la curiosidad.</div></li>
                            <li class="flex items-start"><span class="text-teal-500 font-bold mr-3 mt-1">✓</span><div><strong class="text-gray-800">100% Libre de Anuncios:</strong> Un entorno seguro para que tus hijos exploren sin interrupciones.</div></li>
                        </ul>
                        <a href="checkout.html?items=plan-001" class="mt-8 inline-block btn btn-primary font-bold py-3 px-8 rounded-full focus-ring">Ver Plan Biblioteca</a>
                    </div>
                    <div>
                        <img src="https://placehold.co/600x450/E0F2F1/0A2F5B?text=Biblioteca+Muna+Booki" alt="Niños viendo cuentos en una tablet" class="rounded-2xl shadow-xl w-full">
                    </div>
                </div>
            </div>
        </section>

        <!-- Personalized Stories Section -->
        <section id="personalized" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                 <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div class="md:order-2">
                        <span class="font-bold text-gold-500 uppercase" style="color:var(--color-gold);">CUENTOS PERSONALIZADOS</span>
                        <h2 class="text-3xl md:text-4xl font-bold section-title my-4">Co-crea una historia única para un desafío específico.</h2>
                        <p class="text-lg text-gray-600 mb-6">Transforma retos como el miedo a la oscuridad, los celos por un hermanito o la gestión de la frustración en una herramienta pedagógica poderosa. Al ver la historia desde fuera, con ellos mismos como héroes, los niños procesan sus emociones y adquieren herramientas para la vida.</p>
                         <div class="space-y-6">
                            <div class="flex flex-col items-center text-center md:flex-row md:text-left">
                                <div class="bg-teal-100 rounded-full w-16 h-16 flex items-center justify-center mb-4 md:mb-0 md:mr-6 flex-shrink-0"><span class="text-teal-600 text-3xl font-bold">1</span></div>
                                <div>
                                    <h3 class="text-xl font-bold">Nos cuentas el reto</h3>
                                    <p class="text-gray-600">A través de un simple formulario, nos explicas el desafío o el valor que quieres reforzar y nos das los detalles clave.</p>
                                </div>
                            </div>
                            <div class="flex flex-col items-center text-center md:flex-row md:text-left">
                               <div class="bg-teal-100 rounded-full w-16 h-16 flex items-center justify-center mb-4 md:mb-0 md:mr-6 flex-shrink-0"><span class="text-teal-600 text-3xl font-bold">2</span></div>
                                <div>
                                    <h3 class="text-xl font-bold">Creamos la magia</h3>
                                    <p class="text-gray-600">Nuestro equipo de expertos da vida a una historia y guion únicos para tu hijo.</p>
                                </div>
                            </div>
                            <div class="flex flex-col items-center text-center md:flex-row md:text-left">
                                <div class="bg-teal-100 rounded-full w-16 h-16 flex items-center justify-center mb-4 md:mb-0 md:mr-6 flex-shrink-0"><span class="text-teal-600 text-3xl font-bold">3</span></div>
                                <div>
                                    <h3 class="text-xl font-bold">Recibes tu video</h3>
                                    <p class="text-gray-600">En menos de 24 horas, tienes un video-cuento de alta calidad listo para ver en familia.</p>
                                </div>
                            </div>
                        </div>
                        <a href="#plans" class="mt-8 inline-block btn btn-secondary font-bold py-3 px-8 rounded-full focus-ring">Ver Planes Personalizados</a>
                    </div>
                    <div class="md:order-1">
                        <img src="https://placehold.co/600x450/FFF9C4/0A2F5B?text=Cuento+Personalizado" alt="Un padre y su hijo creando un cuento juntos" class="rounded-2xl shadow-xl w-full">
                    </div>
                </div>
            </div>
        </section>

        <!-- Sample Stories Section -->
        <section id="samples" class="py-20">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold section-title mb-4">Nuestros Cuentos en Acción</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-12">Así se ve y se siente la magia de un cuento Muna Booki.</p>
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Sample 1 -->
                    <div class="flex flex-col">
                        <div class="video-thumbnail bg-teal-200 aspect-video flex items-center justify-center">
                             <div class="play-icon">
                                <svg class="w-10 h-10 text-teal-700" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                            </div>
                        </div>
                        <h3 class="text-xl font-bold mt-4 mb-2 text-gray-800">El Miedo a la Oscuridad de Leo</h3>
                        <p class="text-gray-600">Un cuento para transformar sombras en amigos y la noche en una aventura.</p>
                    </div>
                    <!-- Sample 2 -->
                    <div class="flex flex-col">
                         <div class="video-thumbnail bg-yellow-200 aspect-video flex items-center justify-center">
                            <div class="play-icon">
                               <svg class="w-10 h-10 text-yellow-700" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                            </div>
                        </div>
                        <h3 class="text-xl font-bold mt-4 mb-2 text-gray-800">La Aventura de Compartir de Sofía</h3>
                        <p class="text-gray-600">Una historia que enseña que la alegría se multiplica cuando se comparte.</p>
                    </div>
                    <!-- Sample 3 -->
                    <div class="flex flex-col">
                        <div class="video-thumbnail bg-blue-200 aspect-video flex items-center justify-center">
                           <div class="play-icon">
                                <svg class="w-10 h-10 text-blue-700" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                            </div>
                        </div>
                        <h3 class="text-xl font-bold mt-4 mb-2 text-gray-800">El Nuevo Hermanito de Mía</h3>
                        <p class="text-gray-600">Un relato para recibir al nuevo miembro de la familia con amor y sin celos.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Plans Section -->
        <section id="plans" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-5xl font-bold section-title">
                        Una <span class="font-cursive" style="color: var(--color-teal);">solución</span> para cada familia
                    </h2>
                    <p class="text-xl text-gray-600 mt-4 max-w-2xl mx-auto">
                        Elige el plan que mejor se adapte a tu aventura en la crianza.
                    </p>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 items-stretch max-w-6xl mx-auto">

                    <!-- Plan 1: Acceso Biblioteca -->
                    <div class="plan-card bg-white rounded-2xl shadow-lg p-8 flex flex-col text-center">
                        <h3 class="text-2xl font-bold text-gray-800">Biblioteca Mágica</h3>
                        <p class="text-gray-500 mt-2 flex-grow">Explora un universo de historias seguras y educativas.</p>
                        <div class="my-6">
                            <span class="text-5xl font-extrabold" style="color: var(--color-dark-blue);">$8.900</span>
                            <span class="text-gray-500 font-medium">/ Mes</span>
                        </div>
                        <a href="checkout.html?items=plan-001" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg transition-colors duration-300 mt-auto">
                            Suscribirme
                        </a>
                    </div>

                    <!-- Plan 2: Cuento a Medida -->
                    <div class="plan-card bg-white rounded-2xl shadow-lg p-8 flex flex-col text-center">
                        <h3 class="text-2xl font-bold text-gray-800">Tu Cuento a Medida</h3>
                        <p class="text-gray-500 mt-2 flex-grow">Un video-cuento único para un desafío o valor específico.</p>
                        <div class="relative mt-4">
                            <span class="tooltip-trigger text-sm text-teal-600 font-semibold">
                                + Opción de libro impreso
                                <div class="tooltip-content absolute bottom-full mb-2 w-64 bg-gray-800 text-white text-xs rounded-lg p-3 shadow-lg z-10 left-1/2 -translate-x-1/2">
                                    <strong class="font-bold block">¡Conviértelo en un tesoro!</strong>
                                    Añade la versión impresa de tu cuento por $50.000. Tapa dura y calidad premium.
                                </div>
                            </span>
                        </div>
                        <div class="my-6">
                            <span class="text-5xl font-extrabold" style="color: var(--color-dark-blue);">$18.900</span>
                            <span class="text-gray-500 font-medium">/ único</span>
                        </div>
                        <a href="checkout.html?items=plan-002" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-300 mt-auto">
                            Crear mi Cuento
                        </a>
                    </div>

                    <!-- Plan 3: Cuento Premium -->
                    <div class="plan-card bg-white rounded-2xl shadow-2xl p-8 flex flex-col text-center plan-featured relative">
                         <span class="absolute top-0 -translate-y-1/2 bg-teal-500 text-white text-xs font-bold px-4 py-1 rounded-full uppercase tracking-wider">Más Popular</span>
                        <h3 class="text-2xl font-bold text-gray-800">Cuento Premium</h3>
                        <p class="text-gray-500 mt-2 flex-grow">Co-crea un video-cuento premium con tus fotos, audios y detalles únicos.</p>
                        <div class="relative mt-4">
                            <span class="tooltip-trigger text-sm text-teal-600 font-semibold">
                                + Opción de libro impreso
                                <div class="tooltip-content absolute bottom-full mb-2 w-64 bg-gray-800 text-white text-xs rounded-lg p-3 shadow-lg z-10 left-1/2 -translate-x-1/2">
                                    <strong class="font-bold block">¡Conviértelo en un tesoro!</strong>
                                    Añade la versión impresa de tu cuento por $50.000. Tapa dura y calidad premium.
                                </div>
                            </span>
                        </div>
                        <div class="my-6">
                            <span class="text-5xl font-extrabold" style="color: var(--color-teal);">$40.000</span>
                             <span class="text-gray-500 font-medium">/ único</span>
                        </div>
                        <a href="checkout.html?items=plan-003" class="w-full font-bold py-3 px-6 rounded-lg transition-colors duration-300 mt-auto" style="background-color: var(--color-teal); color: white;">
                            Diseñar Cuento Premium
                        </a>
                    </div>
                </div>

                <!-- Plan Empresas -->
                <div class="mt-16 bg-white rounded-2xl shadow-lg p-8 text-center border-2 border-dashed max-w-6xl mx-auto">
                    <h3 class="text-2xl font-bold" style="color: var(--color-dark-blue);">¿Eres una Empresa o Colegio?</h3>
                    <p class="text-gray-600 mt-2 max-w-xl mx-auto">Tenemos planes especiales para licencias por volumen y proyectos educativos. ¡Conversemos!</p>
                    <a href="https://wa.me/56998956864?text=Hola!%20Vengo%20desde%20la%20p%C3%A1gina%20web%20y%20me%20gustar%C3%ADa%20cotizar%20un%20plan%20para%20mi%20empresa%2Fcolegio." target="_blank" rel="noopener noreferrer" class="inline-block mt-6 bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-3 px-8 rounded-lg transition-colors duration-300">
                        Cotizar ahora
                    </a>
                </div>
            </div>
        </section>

        <!-- Printed Book Section -->
        <section id="printed-book" class="py-20">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-12 items-center bg-white p-12 rounded-2xl shadow-xl">
                    <div class="md:order-2">
                        <span class="font-bold uppercase" style="color: var(--color-dark-blue);">EL COMPLEMENTO PERFECTO</span>
                        <h2 class="text-3xl md:text-4xl font-bold section-title my-4">Convierte su Cuento en un Tesoro Impreso</h2>
                        <p class="text-lg text-gray-600 mb-6">La magia del video, ahora en sus manos. Transforma cualquier cuento personalizado ("A Medida" o "Premium") en un libro físico de alta calidad, con tapa dura y colores vibrantes. Un recuerdo tangible para atesorar en la biblioteca familiar.</p>
                        <ul class="space-y-4">
                            <li class="flex items-start"><span class="text-gold-500 font-bold mr-3 mt-1" style="color: var(--color-gold);">✓</span><div><strong class="text-gray-800">Calidad Premium:</strong> Tapa dura y papel de alto gramaje para máxima durabilidad.</div></li>
                            <li class="flex items-start"><span class="text-gold-500 font-bold mr-3 mt-1" style="color: var(--color-gold);">✓</span><div><strong class="text-gray-800">Recuerdo para Siempre:</strong> Un objeto físico que podrán leer una y otra vez.</div></li>
                            <li class="flex items-start"><span class="text-gold-500 font-bold mr-3 mt-1" style="color: var(--color-gold);">✓</span><div><strong class="text-gray-800">Regalo Inolvidable:</strong> El complemento ideal para un regalo de cumpleaños o una ocasión especial.</div></li>
                        </ul>
                        <a href="#auth" id="more-info-printed" class="mt-8 inline-block btn btn-secondary font-bold py-3 px-8 rounded-full focus-ring">Saber más sobre la impresión</a>
                    </div>
                    <div class="md:order-1">
                        <img src="https://placehold.co/600x450/FFECB3/0A2F5B?text=Libro+Impreso" alt="Un libro físico de Muna Booki abierto en una mesa" class="rounded-2xl shadow-xl w-full">
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- ===== AUTH MODAL (Registro / Login) ===== -->
    <div id="auth-modal" class="fixed inset-0 modal-backdrop modal-hidden z-50">
      <div class="w-full h-full flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative">
          <button id="auth-close" class="absolute top-3 right-3 text-gray-500 hover:text-gray-700" aria-label="Cerrar">
            ✕
          </button>
          <h3 class="text-2xl font-bold text-center section-title mb-1">Accede a tu cuenta</h3>
          <p class="text-center text-gray-600 mb-6">Inicia sesión o crea una cuenta para continuar.</p>

          <div class="flex border-b mb-6">
            <button id="auth-tab-login" class="flex-1 py-2 font-semibold text-teal-600 border-b-2 border-teal-600">Iniciar Sesión</button>
            <button id="auth-tab-register" class="flex-1 py-2 font-semibold text-gray-500">Registrarse</button>
          </div>

          <p id="auth-error" class="text-red-500 text-sm text-center mb-4 h-5"></p>

          <!-- Login -->
          <form id="form-login" class="space-y-4">
            <input name="email" type="email" placeholder="Correo electrónico" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500" />
            <input name="password" type="password" placeholder="Contraseña" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500" />
            <button type="submit" class="w-full btn btn-primary font-bold py-3 rounded-lg">Ingresar</button>
          </form>

          <!-- Register -->
          <form id="form-register" class="space-y-4 hidden">
            <input name="email" type="email" placeholder="Correo electrónico" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500" />
            <input name="password" type="password" placeholder="Crear contraseña" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500" />
            <button type="submit" class="w-full btn btn-primary font-bold py-3 rounded-lg">Crear Cuenta</button>
          </form>

          <div class="my-6 flex items-center">
            <div class="flex-grow border-t border-gray-300"></div>
            <span class="mx-4 text-gray-500 text-sm">o</span>
            <div class="flex-grow border-t border-gray-300"></div>
          </div>

          <button id="btn-google" class="w-full flex items-center justify-center bg-white border border-gray-300 text-gray-700 font-semibold py-3 px-4 rounded-lg hover:bg-gray-50 transition">
            <svg class="w-6 h-6 mr-3" viewBox="0 0 48 48" aria-hidden="true"><defs><path id="a" d="M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path clip-path="url(#b)" fill="#FBBC05" d="M0 37V11l17 13z"/><path clip-path="url(#b)" fill="#EA4335" d="M0 11l17 13 7-6.1L48 14V0H0z"/><path clip-path="url(#b)" fill="#34A853" d="M0 37l30-23 7.9 1L48 0v48H0z"/><path clip-path="url(#b)" fill="#4285F4" d="M48 48L17 24l-4-3 35-10z"/></svg>
            Continuar con Google
          </button>
        </div>
      </div>
    </div>

    <!-- ===== Firebase Auth (reutilizando la misma lógica/base del checkout) ===== -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      import { getAuth, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

      // Config de Firebase (misma del checkout)
      const firebaseConfig = {
        apiKey: "AIzaSyBivlKO0Ijt1hvMNyH9aIGXf_7WZwE2tA4",
        authDomain: "munabooki.firebaseapp.com",
        projectId: "munabooki",
        storageBucket: "munabooki.firebasestorage.app",
        messagingSenderId: "585414544600",
        appId: "1:585414544600:web:77026db4856b0111249bad",
      };
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const provider = new GoogleAuthProvider();

      // UI helpers
      const $ = (s) => document.querySelector(s);
      const authContainer = $("#auth-container");
      const modal = $("#auth-modal");
      const tabLogin = $("#auth-tab-login");
      const tabRegister = $("#auth-tab-register");
      const formLogin = $("#form-login");
      const formRegister = $("#form-register");
      const btnGoogle = $("#btn-google");
      const btnClose = $("#auth-close");
      const errBox = $("#auth-error");

      function openModal() { modal.classList.remove("modal-hidden"); }
      function closeModal() { modal.classList.add("modal-hidden"); errBox.textContent = ""; }
      function switchTab(which) {
        const isLogin = which === "login";
        formLogin.classList.toggle("hidden", !isLogin);
        formRegister.classList.toggle("hidden", isLogin);
        tabLogin.classList.toggle("text-teal-600", isLogin);
        tabLogin.classList.toggle("border-teal-600", isLogin);
        tabRegister.classList.toggle("text-teal-600", !isLogin);
        tabRegister.classList.toggle("border-teal-600", !isLogin);
      }

      // Header buttons según sesión
      function renderHeader(user) {
        authContainer.innerHTML = "";
        if (user) {
          const hello = document.createElement("span");
          hello.className = "hidden md:inline text-gray-600 mr-2";
          hello.textContent = `Hola, ${user.displayName || user.email?.split("@")[0] || "usuario"}`;

          const miCuenta = document.createElement("a");
          miCuenta.href = "mi-cuenta.html";
          miCuenta.className = "btn btn-primary px-4 py-2 rounded-lg font-semibold";
          miCuenta.textContent = "Mi Cuenta";

          const salir = document.createElement("button");
          salir.className = "ml-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded-lg";
          salir.textContent = "Salir";
          salir.addEventListener("click", async () => { await signOut(auth); });

          authContainer.appendChild(hello);
          authContainer.appendChild(miCuenta);
          authContainer.appendChild(salir);
        } else {
          const entrar = document.createElement("button");
          entrar.className = "btn btn-primary px-4 py-2 rounded-lg font-semibold";
          entrar.textContent = "Ingresar / Registrarse";
          entrar.addEventListener("click", () => { openModal(); switchTab("login"); });
          authContainer.appendChild(entrar);
        }
      }

      // Eventos modal
      tabLogin.addEventListener("click", () => switchTab("login"));
      tabRegister.addEventListener("click", () => switchTab("register"));
      btnClose.addEventListener("click", closeModal);
      modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });

      // Acciones login/register
      formLogin.addEventListener("submit", async (e) => {
        e.preventDefault();
        errBox.textContent = "";
        const email = e.target.email.value.trim();
        const pass = e.target.password.value;
        try {
          await signInWithEmailAndPassword(auth, email, pass);
          // redirección inmediata a Mi Cuenta
          window.location.href = "mi-cuenta.html";
        } catch (err) {
          errBox.textContent = "Email o contraseña incorrectos.";
        }
      });

      formRegister.addEventListener("submit", async (e) => {
        e.preventDefault();
        errBox.textContent = "";
        const email = e.target.email.value.trim();
        const pass = e.target.password.value;
        try {
          await createUserWithEmailAndPassword(auth, email, pass);
          window.location.href = "mi-cuenta.html";
        } catch (err) {
          errBox.textContent = "Error al registrar. Verifica los datos.";
        }
      });

      btnGoogle.addEventListener("click", async () => {
        errBox.textContent = "";
        try {
          await signInWithPopup(auth, provider);
          window.location.href = "mi-cuenta.html";
        } catch (err) {
          errBox.textContent = "No se pudo completar con Google.";
        }
      });

      // Estado de auth
      onAuthStateChanged(auth, (user) => {
        renderHeader(user);
      });

      // Acceso directo desde botones que requieran auth (opcional)
      document.querySelectorAll('a[href="#auth"]').forEach(a => {
        a.addEventListener("click", (e) => {
          e.preventDefault();
          openModal();
        });
      });
    </script>
</body>
</html>
